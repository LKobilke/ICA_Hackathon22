<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> 3 Tutorial: Data management with tidyverse | ICA Hackathon 2022</title>
  <meta name="description" content="An introduction to tidy text analysis with R" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content=" 3 Tutorial: Data management with tidyverse | ICA Hackathon 2022" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="An introduction to tidy text analysis with R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content=" 3 Tutorial: Data management with tidyverse | ICA Hackathon 2022" />
  
  <meta name="twitter:description" content="An introduction to tidy text analysis with R" />
  

<meta name="author" content="Lara Kobilke, Department of Media and Communication (IfKW), Ludwig-Maximilians University Munich" />


<meta name="date" content="2022-06-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tutorial-first-steps-in-r.html"/>
<link rel="next" href="tutorial-data-visualization-with-ggplot.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Tidy Text</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>General information</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-can-i-learn-from-this-tutorial"><i class="fa fa-check"></i>What can I learn from this tutorial?</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html"><i class="fa fa-check"></i><b>1</b> Tutorial: Installing &amp; Understanding R/R Studio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#installing-r"><i class="fa fa-check"></i><b>1.1</b> Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#installing-r-studio"><i class="fa fa-check"></i><b>1.2</b> Installing R Studio</a></li>
<li class="chapter" data-level="1.3" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#updating-r-and-r-studio"><i class="fa fa-check"></i><b>1.3</b> Updating R and R Studio</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#on-windows"><i class="fa fa-check"></i><b>1.3.1</b> On Windows</a></li>
<li class="chapter" data-level="1.3.2" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#on-mac"><i class="fa fa-check"></i><b>1.3.2</b> On MAC</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#packages"><i class="fa fa-check"></i><b>1.4</b> Packages</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#installing-packages"><i class="fa fa-check"></i><b>1.4.1</b> Installing packages</a></li>
<li class="chapter" data-level="1.4.2" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#activating-packages"><i class="fa fa-check"></i><b>1.4.2</b> Activating packages</a></li>
<li class="chapter" data-level="1.4.3" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#getting-information-about-packages"><i class="fa fa-check"></i><b>1.4.3</b> Getting information about packages</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#take-aways"><i class="fa fa-check"></i><b>1.5</b> Take-Aways</a></li>
<li class="chapter" data-level="1.6" data-path="tutorial-installing-understanding-rr-studio.html"><a href="tutorial-installing-understanding-rr-studio.html#additional-tutorials"><i class="fa fa-check"></i><b>1.6</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html"><i class="fa fa-check"></i><b>2</b> Tutorial: First steps in R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#using-r-as-a-calculator"><i class="fa fa-check"></i><b>2.1</b> Using R as a calculator</a></li>
<li class="chapter" data-level="2.2" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#using-variables-for-calculation"><i class="fa fa-check"></i><b>2.2</b> Using variables for calculation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#using-vectors-for-calculation"><i class="fa fa-check"></i><b>2.2.1</b> Using vectors for calculation</a></li>
<li class="chapter" data-level="2.2.2" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#selecting-values-from-a-vector"><i class="fa fa-check"></i><b>2.2.2</b> Selecting values from a vector</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#tutorial-working-with-data-files"><i class="fa fa-check"></i><b>2.3</b> Tutorial: Working with data (files)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#defining-your-working-directory"><i class="fa fa-check"></i><b>2.3.1</b> Defining your working directory</a></li>
<li class="chapter" data-level="2.3.2" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#import-data-from-your-working-directory"><i class="fa fa-check"></i><b>2.3.2</b> Import data from your working directory</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#take-aways-1"><i class="fa fa-check"></i><b>2.4</b> Take-Aways</a></li>
<li class="chapter" data-level="2.5" data-path="tutorial-first-steps-in-r.html"><a href="tutorial-first-steps-in-r.html#additional-tutorials-1"><i class="fa fa-check"></i><b>2.5</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html"><i class="fa fa-check"></i><b>3</b> Tutorial: Data management with tidyverse</a>
<ul>
<li class="chapter" data-level="3.1" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#why-not-stick-with-base-r"><i class="fa fa-check"></i><b>3.1</b> Why not stick with Base R?</a></li>
<li class="chapter" data-level="3.2" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#tidyverse-packages"><i class="fa fa-check"></i><b>3.2</b> Tidyverse packages</a></li>
<li class="chapter" data-level="3.3" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#tidy-data"><i class="fa fa-check"></i><b>3.3</b> Tidy data</a></li>
<li class="chapter" data-level="3.4" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#the-pipe-operator"><i class="fa fa-check"></i><b>3.4</b> The pipe operator</a></li>
<li class="chapter" data-level="3.5" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#data-transformation-with-dplyr"><i class="fa fa-check"></i><b>3.5</b> Data transformation with dplyr</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#select"><i class="fa fa-check"></i><b>3.5.1</b> select()</a></li>
<li class="chapter" data-level="3.5.2" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#filter"><i class="fa fa-check"></i><b>3.5.2</b> filter()</a></li>
<li class="chapter" data-level="3.5.3" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#arrange"><i class="fa fa-check"></i><b>3.5.3</b> arrange()</a></li>
<li class="chapter" data-level="3.5.4" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#mutate"><i class="fa fa-check"></i><b>3.5.4</b> mutate()</a></li>
<li class="chapter" data-level="3.5.5" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#simmarize-group_by"><i class="fa fa-check"></i><b>3.5.5</b> simmarize() [+ group_by()]</a></li>
<li class="chapter" data-level="3.5.6" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#chaining-functions-in-a-pipe"><i class="fa fa-check"></i><b>3.5.6</b> Chaining functions in a pipe</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#take-aways-2"><i class="fa fa-check"></i><b>3.6</b> Take-Aways</a></li>
<li class="chapter" data-level="3.7" data-path="tutorial-data-management-with-tidyverse.html"><a href="tutorial-data-management-with-tidyverse.html#additional-tutorials-2"><i class="fa fa-check"></i><b>3.7</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html"><i class="fa fa-check"></i><b>4</b> Tutorial: Data visualization with ggplot</a>
<ul>
<li class="chapter" data-level="4.1" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#why-not-stick-with-base-r-1"><i class="fa fa-check"></i><b>4.1</b> Why not stick with Base R?</a></li>
<li class="chapter" data-level="4.2" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#components-of-a-ggplot-graph"><i class="fa fa-check"></i><b>4.2</b> Components of a ggplot graph</a></li>
<li class="chapter" data-level="4.3" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#installing-activating-ggplot"><i class="fa fa-check"></i><b>4.3</b> Installing &amp; activating ggplot</a></li>
<li class="chapter" data-level="4.4" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#building-your-first-plot"><i class="fa fa-check"></i><b>4.4</b> Building your first plot</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#data"><i class="fa fa-check"></i><b>4.4.1</b> Data</a></li>
<li class="chapter" data-level="4.4.2" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#aesthetics"><i class="fa fa-check"></i><b>4.4.2</b> Aesthetics</a></li>
<li class="chapter" data-level="4.4.3" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#geometrics"><i class="fa fa-check"></i><b>4.4.3</b> Geometrics</a></li>
<li class="chapter" data-level="4.4.4" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#scales"><i class="fa fa-check"></i><b>4.4.4</b> Scales</a></li>
<li class="chapter" data-level="4.4.5" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#themes"><i class="fa fa-check"></i><b>4.4.5</b> Themes</a></li>
<li class="chapter" data-level="4.4.6" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#labs"><i class="fa fa-check"></i><b>4.4.6</b> Labs</a></li>
<li class="chapter" data-level="4.4.7" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#facets"><i class="fa fa-check"></i><b>4.4.7</b> Facets</a></li>
<li class="chapter" data-level="4.4.8" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#saving-graphs"><i class="fa fa-check"></i><b>4.4.8</b> Saving graphs</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#other-common-plot-types"><i class="fa fa-check"></i><b>4.5</b> Other common plot types</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#bar-plots"><i class="fa fa-check"></i><b>4.5.1</b> bar plots</a></li>
<li class="chapter" data-level="4.5.2" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#box-plots"><i class="fa fa-check"></i><b>4.5.2</b> box plots</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#take-aways-3"><i class="fa fa-check"></i><b>4.6</b> Take Aways</a></li>
<li class="chapter" data-level="4.7" data-path="tutorial-data-visualization-with-ggplot.html"><a href="tutorial-data-visualization-with-ggplot.html#additional-tutorials-3"><i class="fa fa-check"></i><b>4.7</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="text-data-manipulation-with-stringr.html"><a href="text-data-manipulation-with-stringr.html"><i class="fa fa-check"></i><b>5</b> Text data manipulation with stringr</a>
<ul>
<li class="chapter" data-level="5.1" data-path="text-data-manipulation-with-stringr.html"><a href="text-data-manipulation-with-stringr.html#whats-stringr"><i class="fa fa-check"></i><b>5.1</b> What’s stringr?</a></li>
<li class="chapter" data-level="5.2" data-path="text-data-manipulation-with-stringr.html"><a href="text-data-manipulation-with-stringr.html#working-with-strings"><i class="fa fa-check"></i><b>5.2</b> Working with strings</a></li>
<li class="chapter" data-level="5.3" data-path="text-data-manipulation-with-stringr.html"><a href="text-data-manipulation-with-stringr.html#working-with-string-patterns"><i class="fa fa-check"></i><b>5.3</b> Working with string patterns</a></li>
<li class="chapter" data-level="5.4" data-path="text-data-manipulation-with-stringr.html"><a href="text-data-manipulation-with-stringr.html#working-with-regular-expressions"><i class="fa fa-check"></i><b>5.4</b> Working with regular expressions</a></li>
<li class="chapter" data-level="5.5" data-path="text-data-manipulation-with-stringr.html"><a href="text-data-manipulation-with-stringr.html#take-aways-4"><i class="fa fa-check"></i><b>5.5</b> Take-Aways</a></li>
<li class="chapter" data-level="5.6" data-path="text-data-manipulation-with-stringr.html"><a href="text-data-manipulation-with-stringr.html#additional-tutorials-4"><i class="fa fa-check"></i><b>5.6</b> Additional tutorials</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html"><i class="fa fa-check"></i><b>6</b> Tidy text analysis</a>
<ul>
<li class="chapter" data-level="6.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#what-is-tidy-text"><i class="fa fa-check"></i><b>6.1</b> What is tidy text?</a></li>
<li class="chapter" data-level="6.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#example"><i class="fa fa-check"></i><b>6.2</b> Example</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#first-steps"><i class="fa fa-check"></i><b>6.2.1</b> First steps</a></li>
<li class="chapter" data-level="6.2.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#preprocessing-real-world-data"><i class="fa fa-check"></i><b>6.2.2</b> Preprocessing real-world data</a></li>
<li class="chapter" data-level="6.2.3" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#relative-word-frequencies"><i class="fa fa-check"></i><b>6.2.3</b> (Relative) word frequencies</a></li>
<li class="chapter" data-level="6.2.4" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#word-log-odds"><i class="fa fa-check"></i><b>6.2.4</b> Word log odds</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#topic-modeling"><i class="fa fa-check"></i><b>6.3</b> Topic modeling</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#first-steps-1"><i class="fa fa-check"></i><b>6.3.1</b> First steps</a></li>
<li class="chapter" data-level="6.3.2" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#model-estimation-number-of-topics"><i class="fa fa-check"></i><b>6.3.2</b> Model estimation: Number of topics</a></li>
<li class="chapter" data-level="6.3.3" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#inspect-the-topics"><i class="fa fa-check"></i><b>6.3.3</b> Inspect the topics</a></li>
<li class="chapter" data-level="6.3.4" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#stms"><i class="fa fa-check"></i><b>6.3.4</b> STMs</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#take-aways-5"><i class="fa fa-check"></i><b>6.4</b> Take-Aways</a></li>
<li class="chapter" data-level="6.5" data-path="tidy-text-analysis.html"><a href="tidy-text-analysis.html#additional-tutorials-5"><i class="fa fa-check"></i><b>6.5</b> Additional tutorials</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/LKobilke/ICA_Hackathon22" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ICA Hackathon 2022</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tutorial-data-management-with-tidyverse" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number"> 3</span> Tutorial: Data management with tidyverse<a href="tutorial-data-management-with-tidyverse.html#tutorial-data-management-with-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p><strong>After working through Tutorial 3, you’ll…</strong></p>
<ul>
<li>know the advantages of the <code>tidyverse</code> vs. <code>Base R</code></li>
<li>know about different formats of tabular data</li>
<li>understand what packages are included in the <code>tidyverse</code> meta-package</li>
<li>know how to do data modifications and transformations with <code>dplyr</code></li>
</ul>
<div id="why-not-stick-with-base-r" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Why not stick with Base R?<a href="tutorial-data-management-with-tidyverse.html#why-not-stick-with-base-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You might wonder why we’ve spent so much time exploring functions in <code>Base R</code> to now learn data management with <code>tidyverse</code>. After all, data management can also be done in <code>Base R</code>, can’t it? I personally recommend that all R beginners should work with the <code>tidyverse</code> as early as possible. There are three reasons supporting my argument:</p>
<ol style="list-style-type: decimal">
<li><strong>Ease of use:</strong> The <code>tidyverse</code> is very accessible for R “beginners”, i.e. its syntax is very easy to understand. It allows you to set goals (i.e. what you want to do with your data) and get you working on these goals very quickly. Definitely more quickly than in <code>Base R</code>!</li>
<li><strong>Standard for data management:</strong> A few years ago, the <code>tidyverse</code> has become the de facto standard for data management in R. It is a meta-package, which means that it is a collection of distinct packages that all follow the same design principles to make code reading and writing as simple as possible. For example, all functions are named after verbs that indicate exactly what they perform (e.g. filter or summarize).</li>
<li><strong>Beautiful graphs:</strong> With the <code>tidyverse</code>, all data management steps can be swiftly transferred into beautiful graphs. This is because the most popular graph package in R, <code>ggplot2</code>, is part of the <code>tidyverse</code>.</li>
</ol>
<p>Are you excited now? Then let’s get started!</p>
</div>
<div id="tidyverse-packages" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Tidyverse packages<a href="tutorial-data-management-with-tidyverse.html#tidyverse-packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>tidyverse</code> comes with a great arsenal of topic-specific packages and their respective functions. It includes packages for:</p>
<ul>
<li><code>tibble</code>: creating data structures like tibbles, which is an enhanced type of data frame</li>
<li><code>readr, haven, readxl</code>: reading data (e.g. readr for CSV, haven for SPSS, Stata and SAS, readxl for Excel)</li>
<li><code>tidyr, dplyr</code>: data transformation, modification, and summary statistics</li>
<li><code>stringr, forcats, lubridate</code>: create special, powerful object types (e.g. stringr for working with text objects, forcats for factors, lubridate for time data)</li>
<li><code>purrr</code>: programming with R</li>
<li><code>ggplot2</code>: graphing/charting</li>
</ul>
<p>The most frequently used packages of the <code>tidyverse</code> can be installed and activated in one go (less frequently used packages like <code>haven</code> still need to be installed and activated separately):</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="tutorial-data-management-with-tidyverse.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>) <span class="co"># install the package (only on the first time)</span></span>
<span id="cb33-2"><a href="tutorial-data-management-with-tidyverse.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) <span class="co"># active the package</span></span></code></pre></div>
</div>
<div id="tidy-data" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Tidy data<a href="tutorial-data-management-with-tidyverse.html#tidy-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Dataframes are tabular data. However, data can also have other formats, for example as nested, i.e. hierarchical, lists. In communication research, these other data formats are mainly used by social media and their respective APIs (perhaps you have heard of the “JSON” format before).</p>
<p>In our course, however, we’ll focus on tabular data.The same data can be represented differently in tables. We perceive some of these representations as tidy, others as messy. While tidy data principles establish a standard for organizing data values inside a data frame and thus all tidy data look the same, every messy dataset is messy in its own way.</p>
<p><strong>Take a look at the table below. It shows a Starwars data set that comes pre-installed with the dplyr package. Do you feel the tabled data is messy? Why (not)?</strong></p>
<pre><code>## # A tibble: 10 x 3
##    name                  body_feature value
##    &lt;chr&gt;                 &lt;chr&gt;        &lt;dbl&gt;
##  1 Anakin Skywalker      height         188
##  2 Anakin Skywalker      mass            84
##  3 Chewbacca             height         228
##  4 Chewbacca             mass           112
##  5 Darth Vader           height         202
##  6 Darth Vader           mass           136
##  7 Jabba Desilijic Tiure height         175
##  8 Jabba Desilijic Tiure mass          1358
##  9 Leia Organa           height         150
## 10 Leia Organa           mass            49</code></pre>
<p>Overall, this data is messy. It comes with three messy problems:</p>
<ol style="list-style-type: decimal">
<li>This <em>body_feature</em> column comprises information relating to both height and weight, i.e. both variables are stored in a single column.</li>
<li>As a result, the <em>value</em> column is reliant on the <em>body_feature</em> column; we can’t tell the stored values apart by merely looking at the value column. We always need to check the <em>body_feature</em> column.</li>
<li>Consequently, we have issues with vectorized functions (remember, in R, columns in data sets are vectors): We can’t, for example, use the mean() function on the <em>value</em> column to determine the average weight of the Star Wars characters since the height values are also stored there.</li>
</ol>
<p><strong>What do you think of this table? Is it messy?</strong></p>
<pre><code>## # A tibble: 5 x 3
##   name                  height  mass
##   &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
## 1 Anakin Skywalker         188    84
## 2 Chewbacca                228   112
## 3 Darth Vader              202   136
## 4 Jabba Desilijic Tiure    175  1358
## 5 Leia Organa              150    49</code></pre>
<p>This table looks tidy! Tidy data is a standard way of mapping the meaning of a dataset to its structure. We determine whether a dataset is messy or tidy depending on how rows, columns and tables are matched up with observations, variables and types. We consider a table tidy when it follows the following <strong>golden rules</strong>:</p>
<ol style="list-style-type: decimal">
<li><strong>Columns:</strong> Every column is one variable.</li>
<li><strong>Rows</strong>: Every row is one observation.</li>
<li><strong>Cells:</strong> Every cell contains one single value.</li>
</ol>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<tbody>
<tr class="odd">
<td><em>Image: The tidy data principle <a href="https://r4ds.had.co.nz/tidy-data.html">(Source: R for Data Science)</a></em></td>
</tr>
<tr class="even">
<td><img src="images/Tut7_tidy_data.png" /></td>
</tr>
</tbody>
</table>
<p>In messy data sets, on the other hand…</p>
<ol style="list-style-type: decimal">
<li>Column headers are values, not variable names.</li>
<li>Multiple variables are stored in one column.</li>
<li>Variables are stored in both rows and columns.</li>
<li>Multiple types of observational units are stored in the same table.</li>
<li>A single observational unit is stored in multiple tables.</li>
</ol>
<p><strong>Why should you be concerned about tidy data organization?</strong></p>
<p>There are two major advantages:</p>
<ol style="list-style-type: decimal">
<li>When you have a consistent data structure, it is easier to learn the respective tools that work well with this data structure. <code>dplyr</code>, <code>ggplot2</code>, and all the other <code>tidyverse</code> packages are designed for working with tidy data.</li>
<li>Putting variables in columns makes R’s vectorized nature shine. The majority of built-in R-functions (like the mean() function) works with vectors of values. As a result, the tidy reorganization of data seems only natural for a good work flow in R.</li>
</ol>
<p>If you have been working mainly with survey data, then you will already be familiar with these basic rules, as data export from survey software usually follows these principles. However, “real-world” data from databases or social media often does not follow these principles. That’s why it’s sometimes true to say that 80% of data analysis is spent on cleaning and transforming data.</p>
</div>
<div id="the-pipe-operator" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> The pipe operator<a href="tutorial-data-management-with-tidyverse.html#the-pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Truly, <code>dplyr</code> is my favorite <code>tidyverse</code> package (even more so than <code>ggplot2</code>, which we’ll cover later!). It allows you to perform powerful data transformations in just a few simple steps.</p>
<p>To this end, <code>dplyr</code> relies on the pipe operator (<em>%&gt;%</em>).<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> The <em>%&gt;%</em> operator allows functions to be applied sequentially to the same source object in a concise manner, so that step-by-step transformations can be applied to the data. Therefore, we always call the source object first and then add each transformation step separated by the <em>%&gt;%</em> operator. Let’s illustrate this concept with an example. We’ll use the Starwars data set that you are already familiar with.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="tutorial-data-management-with-tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a>starwars_data <span class="sc">%&gt;%</span>    <span class="co"># First, we define the source object, i.e. the data frame that we want to transform, followed by the pipe operator </span></span>
<span id="cb36-2"><a href="tutorial-data-management-with-tidyverse.html#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()             <span class="co"># Second, we specify which function should be performed on the source object, here: scatterplot</span></span></code></pre></div>
<p><img src="Tidy-Text-Analysis_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>Now, that’s not very impressive. We could do the same in <code>Base R</code> like this:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="tutorial-data-management-with-tidyverse.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(starwars_data)</span></code></pre></div>
<p><img src="Tidy-Text-Analysis_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>However, <code>dplyr</code> gets really impressive when you chain functions sequentially. You can apply certain selection criteria to your data and plot it in one go. For example, we might exclude the variable <em>name</em> from our scatter plot, since it’s not a metric variable anyway. Also, we might want to look only at those Star Wars characters taller than 170 cm. Let’s try it in a single run!</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="tutorial-data-management-with-tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a>starwars_data <span class="sc">%&gt;%</span>              <span class="co"># Define the source object</span></span>
<span id="cb38-2"><a href="tutorial-data-management-with-tidyverse.html#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(height, mass) <span class="sc">%&gt;%</span>     <span class="co"># Keep only the height and mass column</span></span>
<span id="cb38-3"><a href="tutorial-data-management-with-tidyverse.html#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(height <span class="sc">&gt;</span> <span class="dv">170</span>) <span class="sc">%&gt;%</span>     <span class="co"># Filter all observations that are taller than 170cm  </span></span>
<span id="cb38-4"><a href="tutorial-data-management-with-tidyverse.html#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()                       <span class="co"># Plot!</span></span></code></pre></div>
<p><img src="Tidy-Text-Analysis_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p>Now try to do the same in <code>Base R</code>:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="tutorial-data-management-with-tidyverse.html#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(starwars_data[starwars_data<span class="sc">$</span>height<span class="sc">&gt;</span><span class="dv">170</span>,]<span class="sc">$</span>mass<span class="sc">~</span>starwars_data[starwars_data<span class="sc">$</span>height<span class="sc">&gt;</span><span class="dv">170</span>,]<span class="sc">$</span>height, <span class="at">xlab=</span><span class="st">&quot;height&quot;</span>, <span class="at">ylab=</span><span class="st">&quot;mass&quot;</span>)</span></code></pre></div>
<p><img src="Tidy-Text-Analysis_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p>The <code>Base R</code> code is longer, more nested, and not as readable as the code written in <code>dplyr</code>. And the more selection criteria and functions you need to implement, the worse it gets. For example, imagine you would also want to exclude Star Wars characters with a mass bigger than 1200kg. Peace of cake with <code>dplyr</code>:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="tutorial-data-management-with-tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a>starwars_data <span class="sc">%&gt;%</span>              </span>
<span id="cb40-2"><a href="tutorial-data-management-with-tidyverse.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(height, mass) <span class="sc">%&gt;%</span>     </span>
<span id="cb40-3"><a href="tutorial-data-management-with-tidyverse.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(height <span class="sc">&gt;</span> <span class="dv">170</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="tutorial-data-management-with-tidyverse.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(mass <span class="sc">&lt;</span> <span class="dv">1200</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-5"><a href="tutorial-data-management-with-tidyverse.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>()                       </span></code></pre></div>
<p><img src="Tidy-Text-Analysis_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="data-transformation-with-dplyr" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Data transformation with dplyr<a href="tutorial-data-management-with-tidyverse.html#data-transformation-with-dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>dplyr</code>comes with five main functions:</p>
<ol style="list-style-type: decimal">
<li><code>select()</code>: select variables column by column, i.e. pick columns / variables by their names</li>
<li><code>filter()</code>: filter observations row by row, i.e. pick observations by their values</li>
<li><code>arrange()</code>: sort / reorder data in ascending or descending order</li>
<li><code>mutate()</code>: calculate new variables or transform existing ones</li>
<li><code>summarize()</code>: summarize variables (e.g. mean, standard deviation, etc.), best combined with <code>group_by()</code></li>
</ol>
<div id="select" class="section level3 hasAnchor" number="3.5.1">
<h3><span class="header-section-number">3.5.1</span> select()<a href="tutorial-data-management-with-tidyverse.html#select" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Scientists will frequently provide you with large data sets including hundreds of variables (often even more!). The first problem in this scenario is narrowing down the variables you are truly interested in. <code>select()</code> helps you to easily choose a suitable subset of variables. In this selection process, the name of the data frame is the source object, followed by the pipe <em>%&gt;%</em> operator. The expression that selects the columns that you are interested in comes after that.</p>
<p>Take the Star Wars data, for example. The original data set has 87 observations (Star Wars characters) and 14 columns / variables (traits of these characters, e.g., <em>birth_year</em>, <em>gender</em>, and <em>species</em>). Yes, 14 columns is not a lot and you could get an overview of this data without subsetting columns. Let’s take a look at the original data frame:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="tutorial-data-management-with-tidyverse.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)            <span class="co"># load dplyr</span></span>
<span id="cb41-2"><a href="tutorial-data-management-with-tidyverse.html#cb41-2" aria-hidden="true" tabindex="-1"></a>starwars_data <span class="ot">&lt;-</span> starwars <span class="co"># assign the pre-installed starwars data from dplyr to a source object / variable</span></span>
<span id="cb41-3"><a href="tutorial-data-management-with-tidyverse.html#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="tutorial-data-management-with-tidyverse.html#cb41-4" aria-hidden="true" tabindex="-1"></a>starwars_data             <span class="co"># print the content of the data frame to the console</span></span></code></pre></div>
<pre><code>## # A tibble: 87 x 14
##    name      height  mass hair_color skin_color eye_color birth_year sex   gender homeworld species films vehicles
##    &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;lis&gt; &lt;list&gt;  
##  1 Luke Sky~    172    77 blond      fair       blue            19   male  mascu~ Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  2 C-3PO        167    75 &lt;NA&gt;       gold       yellow         112   none  mascu~ Tatooine  Droid   &lt;chr&gt; &lt;chr&gt;   
##  3 R2-D2         96    32 &lt;NA&gt;       white, bl~ red             33   none  mascu~ Naboo     Droid   &lt;chr&gt; &lt;chr&gt;   
##  4 Darth Va~    202   136 none       white      yellow          41.9 male  mascu~ Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  5 Leia Org~    150    49 brown      light      brown           19   fema~ femin~ Alderaan  Human   &lt;chr&gt; &lt;chr&gt;   
##  6 Owen Lars    178   120 brown, gr~ light      blue            52   male  mascu~ Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  7 Beru Whi~    165    75 brown      light      blue            47   fema~ femin~ Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  8 R5-D4         97    32 &lt;NA&gt;       white, red red             NA   none  mascu~ Tatooine  Droid   &lt;chr&gt; &lt;chr&gt;   
##  9 Biggs Da~    183    84 black      light      brown           24   male  mascu~ Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
## 10 Obi-Wan ~    182    77 auburn, w~ fair       blue-gray       57   male  mascu~ Stewjon   Human   &lt;chr&gt; &lt;chr&gt;   
## # ... with 77 more rows, and 1 more variable: starships &lt;list&gt;</code></pre>
<p>For the sake of practice, let’s say we only want to analyze the <em>species</em>, <em>birth_year</em>, <em>mass</em>, and <em>height</em> of these characters. To simplify data handling, we want to keep only the respective columns.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="tutorial-data-management-with-tidyverse.html#cb43-1" aria-hidden="true" tabindex="-1"></a>starwars_data <span class="sc">%&gt;%</span>                                 <span class="co"># define the source object</span></span>
<span id="cb43-2"><a href="tutorial-data-management-with-tidyverse.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, species, birth_year, mass, height) <span class="co"># keep only the name, species, birth_year, mass and height column</span></span></code></pre></div>
<pre><code>## # A tibble: 87 x 5
##    name               species birth_year  mass height
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Luke Skywalker     Human         19      77    172
##  2 C-3PO              Droid        112      75    167
##  3 R2-D2              Droid         33      32     96
##  4 Darth Vader        Human         41.9   136    202
##  5 Leia Organa        Human         19      49    150
##  6 Owen Lars          Human         52     120    178
##  7 Beru Whitesun lars Human         47      75    165
##  8 R5-D4              Droid         NA      32     97
##  9 Biggs Darklighter  Human         24      84    183
## 10 Obi-Wan Kenobi     Human         57      77    182
## # ... with 77 more rows</code></pre>
<p>At the moment you have only printed the transformed data to the console. However, most of the time we want to keep the transformed data ready for further calculations. In this case we should assign the transformed data into a new source object, which we can access later.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="tutorial-data-management-with-tidyverse.html#cb45-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="ot">&lt;-</span> starwars_data <span class="sc">%&gt;%</span>                   <span class="co"># assign a new source object and define the old source object</span></span>
<span id="cb45-2"><a href="tutorial-data-management-with-tidyverse.html#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, species, birth_year, mass, height)     <span class="co"># keep only the name, species, birth_year, mass and height column</span></span></code></pre></div>
<p>Let’s print the new source object, <em>starwars_short</em>, to the console.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="tutorial-data-management-with-tidyverse.html#cb46-1" aria-hidden="true" tabindex="-1"></a>starwars_short</span></code></pre></div>
<pre><code>## # A tibble: 87 x 5
##    name               species birth_year  mass height
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Luke Skywalker     Human         19      77    172
##  2 C-3PO              Droid        112      75    167
##  3 R2-D2              Droid         33      32     96
##  4 Darth Vader        Human         41.9   136    202
##  5 Leia Organa        Human         19      49    150
##  6 Owen Lars          Human         52     120    178
##  7 Beru Whitesun lars Human         47      75    165
##  8 R5-D4              Droid         NA      32     97
##  9 Biggs Darklighter  Human         24      84    183
## 10 Obi-Wan Kenobi     Human         57      77    182
## # ... with 77 more rows</code></pre>
<p>You can also delete columns by making a reverse selection with the <em>- symbol</em>. This means that you select all columns except the one whose name you specify.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="tutorial-data-management-with-tidyverse.html#cb48-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span>                     </span>
<span id="cb48-2"><a href="tutorial-data-management-with-tidyverse.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>name)                      <span class="co"># keep all columns except the name column (i.e. delete name column)</span></span></code></pre></div>
<pre><code>## # A tibble: 87 x 4
##    species birth_year  mass height
##    &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Human         19      77    172
##  2 Droid        112      75    167
##  3 Droid         33      32     96
##  4 Human         41.9   136    202
##  5 Human         19      49    150
##  6 Human         52     120    178
##  7 Human         47      75    165
##  8 Droid         NA      32     97
##  9 Human         24      84    183
## 10 Human         57      77    182
## # ... with 77 more rows</code></pre>
<p>You can delete more than one column in one go:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="tutorial-data-management-with-tidyverse.html#cb50-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span>                     </span>
<span id="cb50-2"><a href="tutorial-data-management-with-tidyverse.html#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(name,species))           <span class="co"># keep all columns except the name &amp; species column (i.e. delete these columns)</span></span></code></pre></div>
<pre><code>## # A tibble: 87 x 3
##    birth_year  mass height
##         &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1       19      77    172
##  2      112      75    167
##  3       33      32     96
##  4       41.9   136    202
##  5       19      49    150
##  6       52     120    178
##  7       47      75    165
##  8       NA      32     97
##  9       24      84    183
## 10       57      77    182
## # ... with 77 more rows</code></pre>
<p><strong>Tip for advanced users:</strong> You can select columns and rename them at the same time.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="tutorial-data-management-with-tidyverse.html#cb52-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span>                     </span>
<span id="cb52-2"><a href="tutorial-data-management-with-tidyverse.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;character&quot;</span><span class="ot">=</span>name, <span class="st">&quot;age&quot;</span><span class="ot">=</span>birth_year)      <span class="co"># select columns that you want to keep &amp; rename them</span></span></code></pre></div>
<pre><code>## # A tibble: 87 x 2
##    character            age
##    &lt;chr&gt;              &lt;dbl&gt;
##  1 Luke Skywalker      19  
##  2 C-3PO              112  
##  3 R2-D2               33  
##  4 Darth Vader         41.9
##  5 Leia Organa         19  
##  6 Owen Lars           52  
##  7 Beru Whitesun lars  47  
##  8 R5-D4               NA  
##  9 Biggs Darklighter   24  
## 10 Obi-Wan Kenobi      57  
## # ... with 77 more rows</code></pre>
</div>
<div id="filter" class="section level3 hasAnchor" number="3.5.2">
<h3><span class="header-section-number">3.5.2</span> filter()<a href="tutorial-data-management-with-tidyverse.html#filter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>filter()</code> divides observations into groups depending on their values. The name of the data frame is the source object, followed by the pipe <em>%&gt;%</em> operator. Then follow the expressions that filter the data.</p>
<p>Let’s only select human Star Wars characters in our transformed data set <em>starwars_short</em>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="tutorial-data-management-with-tidyverse.html#cb54-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb54-2"><a href="tutorial-data-management-with-tidyverse.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species<span class="sc">==</span><span class="st">&quot;Human&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 35 x 5
##    name               species birth_year  mass height
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Luke Skywalker     Human         19      77    172
##  2 Darth Vader        Human         41.9   136    202
##  3 Leia Organa        Human         19      49    150
##  4 Owen Lars          Human         52     120    178
##  5 Beru Whitesun lars Human         47      75    165
##  6 Biggs Darklighter  Human         24      84    183
##  7 Obi-Wan Kenobi     Human         57      77    182
##  8 Anakin Skywalker   Human         41.9    84    188
##  9 Wilhuff Tarkin     Human         64      NA    180
## 10 Han Solo           Human         29      80    180
## # ... with 25 more rows</code></pre>
<p>And now let’s only select Star Wars character who are younger than 24 or exactly 24 years old.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="tutorial-data-management-with-tidyverse.html#cb56-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="tutorial-data-management-with-tidyverse.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(birth_year<span class="sc">&lt;=</span><span class="dv">24</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 x 5
##   name                  species birth_year  mass height
##   &lt;chr&gt;                 &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
## 1 Luke Skywalker        Human           19    77    172
## 2 Leia Organa           Human           19    49    150
## 3 Biggs Darklighter     Human           24    84    183
## 4 Wedge Antilles        Human           21    77    170
## 5 IG-88                 Droid           15   140    200
## 6 Wicket Systri Warrick Ewok             8    20     88
## 7 Plo Koon              Kel Dor         22    80    188</code></pre>
<p>Chaining some functions, let’s look at Star Wars character who are a <em>Droid</em> and older than 24.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="tutorial-data-management-with-tidyverse.html#cb58-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="tutorial-data-management-with-tidyverse.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species<span class="sc">==</span><span class="st">&quot;Droid&quot;</span> <span class="sc">&amp;</span> birth_year <span class="sc">&gt;</span> <span class="dv">24</span>)   <span class="co"># &amp; --&gt; filter all observations to which both logical statements apply</span></span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   name  species birth_year  mass height
##   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
## 1 C-3PO Droid          112    75    167
## 2 R2-D2 Droid           33    32     96</code></pre>
<p>Alternatively, you can also write these filters like this:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="tutorial-data-management-with-tidyverse.html#cb60-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb60-2"><a href="tutorial-data-management-with-tidyverse.html#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species<span class="sc">==</span><span class="st">&quot;Droid&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb60-3"><a href="tutorial-data-management-with-tidyverse.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(birth_year <span class="sc">&gt;</span> <span class="dv">24</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   name  species birth_year  mass height
##   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
## 1 C-3PO Droid          112    75    167
## 2 R2-D2 Droid           33    32     96</code></pre>
<p>Besides the <em>&amp;</em> operator, there are many more logical operators that you can choose from to optimize your filter choices. Here is an overview:</p>
<hr />
<p><em>Image: Logical, i.e. boolean, operators (Source: <a href="https://r4ds.had.co.nz/transform.html?q=filter#logical-operators">R for Data Science</a></em>)</p>
<p>[]!(C:/Users/LaraK/Desktop/To-Do/ICA Hackathon 2022/LaraKobilke/images/Tut7_logical_operators.PNG)</p>
<hr />
<p><strong>Tip for advanced users 1:</strong> You can negate filters. This means that you keep all observations except the one that you have specified with the <em>!=</em> operator (read <em>!=</em> as: <em>is not</em> or <em>is unequal to</em>). For example, you can choose to include only non-human Star Wars characters.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="tutorial-data-management-with-tidyverse.html#cb62-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="tutorial-data-management-with-tidyverse.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(species<span class="sc">!=</span><span class="st">&quot;Human&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 48 x 5
##    name                  species        birth_year  mass height
##    &lt;chr&gt;                 &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 C-3PO                 Droid                 112    75    167
##  2 R2-D2                 Droid                  33    32     96
##  3 R5-D4                 Droid                  NA    32     97
##  4 Chewbacca             Wookiee               200   112    228
##  5 Greedo                Rodian                 44    74    173
##  6 Jabba Desilijic Tiure Hutt                  600  1358    175
##  7 Yoda                  Yoda&#39;s species        896    17     66
##  8 IG-88                 Droid                  15   140    200
##  9 Bossk                 Trandoshan             53   113    190
## 10 Ackbar                Mon Calamari           41    83    180
## # ... with 38 more rows</code></pre>
<p>Alternatively, you achieve the same goal by negating the entire function call. Negating the entire function call can be handy at times.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="tutorial-data-management-with-tidyverse.html#cb64-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="tutorial-data-management-with-tidyverse.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(species<span class="sc">==</span><span class="st">&quot;Human&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 48 x 5
##    name                  species        birth_year  mass height
##    &lt;chr&gt;                 &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 C-3PO                 Droid                 112    75    167
##  2 R2-D2                 Droid                  33    32     96
##  3 R5-D4                 Droid                  NA    32     97
##  4 Chewbacca             Wookiee               200   112    228
##  5 Greedo                Rodian                 44    74    173
##  6 Jabba Desilijic Tiure Hutt                  600  1358    175
##  7 Yoda                  Yoda&#39;s species        896    17     66
##  8 IG-88                 Droid                  15   140    200
##  9 Bossk                 Trandoshan             53   113    190
## 10 Ackbar                Mon Calamari           41    83    180
## # ... with 38 more rows</code></pre>
<p><strong>Tip for advanced users 2:</strong> You can filter for missing values (NAs) with the <code>is.na()</code> function.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="tutorial-data-management-with-tidyverse.html#cb66-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb66-2"><a href="tutorial-data-management-with-tidyverse.html#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(birth_year))</span></code></pre></div>
<pre><code>## # A tibble: 44 x 5
##    name             species   birth_year  mass height
##    &lt;chr&gt;            &lt;chr&gt;          &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 R5-D4            Droid             NA    32     97
##  2 Jek Tono Porkins Human             NA   110    180
##  3 Arvel Crynyd     Human             NA    NA     NA
##  4 Nien Nunb        Sullustan         NA    68    160
##  5 Nute Gunray      Neimodian         NA    90    191
##  6 Roos Tarpals     Gungan            NA    82    224
##  7 Rugor Nass       Gungan            NA    NA    206
##  8 Ric Olié         &lt;NA&gt;              NA    NA    183
##  9 Watto            Toydarian         NA    NA    137
## 10 Sebulba          Dug               NA    40    112
## # ... with 34 more rows</code></pre>
<p>And you can negate that filter to get rid of all observation that have missing values (NAs).</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="tutorial-data-management-with-tidyverse.html#cb68-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb68-2"><a href="tutorial-data-management-with-tidyverse.html#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(birth_year))</span></code></pre></div>
<pre><code>## # A tibble: 43 x 5
##    name               species birth_year  mass height
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Luke Skywalker     Human         19      77    172
##  2 C-3PO              Droid        112      75    167
##  3 R2-D2              Droid         33      32     96
##  4 Darth Vader        Human         41.9   136    202
##  5 Leia Organa        Human         19      49    150
##  6 Owen Lars          Human         52     120    178
##  7 Beru Whitesun lars Human         47      75    165
##  8 Biggs Darklighter  Human         24      84    183
##  9 Obi-Wan Kenobi     Human         57      77    182
## 10 Anakin Skywalker   Human         41.9    84    188
## # ... with 33 more rows</code></pre>
<p><strong>Tip for advanced users 3:</strong> Watch out for the <em>| operator</em> (read: <em>or</em>). This one can be tricky to negate!</p>
<p>For example, with this code you get all characters that are NEITHER human NOR older than 33 years. I.e. you get all non-human characters who are younger than 33 or exactly 33 years old.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="tutorial-data-management-with-tidyverse.html#cb70-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="tutorial-data-management-with-tidyverse.html#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>((species <span class="sc">==</span> <span class="st">&quot;Human&quot;</span>) <span class="sc">|</span> (birth_year <span class="sc">&gt;</span> <span class="dv">33</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 5
##   name                  species birth_year  mass height
##   &lt;chr&gt;                 &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
## 1 R2-D2                 Droid           33    32     96
## 2 IG-88                 Droid           15   140    200
## 3 Wicket Systri Warrick Ewok             8    20     88
## 4 Plo Koon              Kel Dor         22    80    188</code></pre>
<p>But with this code, you’ll get all observations that are either non-human (regardless of their age) OR humans who are older than 33 years old.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="tutorial-data-management-with-tidyverse.html#cb72-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="tutorial-data-management-with-tidyverse.html#cb72-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((species <span class="sc">!=</span> <span class="st">&quot;Human&quot;</span>) <span class="sc">|</span> (birth_year <span class="sc">&gt;</span> <span class="dv">33</span>))</span></code></pre></div>
<pre><code>## # A tibble: 67 x 5
##    name               species birth_year  mass height
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 C-3PO              Droid        112      75    167
##  2 R2-D2              Droid         33      32     96
##  3 Darth Vader        Human         41.9   136    202
##  4 Owen Lars          Human         52     120    178
##  5 Beru Whitesun lars Human         47      75    165
##  6 R5-D4              Droid         NA      32     97
##  7 Obi-Wan Kenobi     Human         57      77    182
##  8 Anakin Skywalker   Human         41.9    84    188
##  9 Wilhuff Tarkin     Human         64      NA    180
## 10 Chewbacca          Wookiee      200     112    228
## # ... with 57 more rows</code></pre>
</div>
<div id="arrange" class="section level3 hasAnchor" number="3.5.3">
<h3><span class="header-section-number">3.5.3</span> arrange()<a href="tutorial-data-management-with-tidyverse.html#arrange" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>arrange()</code> and <code>filter()</code> are like two brothers: both look similar, but they also differ in at least one essential aspect. Both functions change the rows of the data frame, but unlike <code>filter()</code>, <code>arrange()</code> does not select or delete rows, it only changes their order (either ascending or descending). By default, <code>arrange()</code> will sort in ascending order, i.e. from 1:100 (numeric vector) and from A:Z (character vector). <code>arrange()</code> must always be applied to at least one column that is to be sorted.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="tutorial-data-management-with-tidyverse.html#cb74-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb74-2"><a href="tutorial-data-management-with-tidyverse.html#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(birth_year)</span></code></pre></div>
<pre><code>## # A tibble: 87 x 5
##    name                  species birth_year  mass height
##    &lt;chr&gt;                 &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Wicket Systri Warrick Ewok           8    20       88
##  2 IG-88                 Droid         15   140      200
##  3 Luke Skywalker        Human         19    77      172
##  4 Leia Organa           Human         19    49      150
##  5 Wedge Antilles        Human         21    77      170
##  6 Plo Koon              Kel Dor       22    80      188
##  7 Biggs Darklighter     Human         24    84      183
##  8 Han Solo              Human         29    80      180
##  9 Lando Calrissian      Human         31    79      177
## 10 Boba Fett             Human         31.5  78.2    183
## # ... with 77 more rows</code></pre>
<p>To get a descending order:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="tutorial-data-management-with-tidyverse.html#cb76-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="tutorial-data-management-with-tidyverse.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(birth_year))</span></code></pre></div>
<pre><code>## # A tibble: 87 x 5
##    name                  species        birth_year  mass height
##    &lt;chr&gt;                 &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Yoda                  Yoda&#39;s species        896    17     66
##  2 Jabba Desilijic Tiure Hutt                  600  1358    175
##  3 Chewbacca             Wookiee               200   112    228
##  4 C-3PO                 Droid                 112    75    167
##  5 Dooku                 Human                 102    80    193
##  6 Qui-Gon Jinn          Human                  92    89    193
##  7 Ki-Adi-Mundi          Cerean                 92    82    198
##  8 Finis Valorum         Human                  91    NA    170
##  9 Palpatine             Human                  82    75    170
## 10 Cliegg Lars           Human                  82    NA    183
## # ... with 77 more rows</code></pre>
<p>If you specify more than one column, then subsequent columns are used to break ties. Also note that missing values are always displayed last:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="tutorial-data-management-with-tidyverse.html#cb78-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb78-2"><a href="tutorial-data-management-with-tidyverse.html#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(species, birth_year)</span></code></pre></div>
<pre><code>## # A tibble: 87 x 5
##    name            species  birth_year  mass height
##    &lt;chr&gt;           &lt;chr&gt;         &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;
##  1 Ratts Tyerell   Aleena           NA    15     79
##  2 Dexter Jettster Besalisk         NA   102    198
##  3 Ki-Adi-Mundi    Cerean           92    82    198
##  4 Mas Amedda      Chagrian         NA    NA    196
##  5 Zam Wesell      Clawdite         NA    55    168
##  6 IG-88           Droid            15   140    200
##  7 R2-D2           Droid            33    32     96
##  8 C-3PO           Droid           112    75    167
##  9 R5-D4           Droid            NA    32     97
## 10 R4-P17          Droid            NA    NA     96
## # ... with 77 more rows</code></pre>
</div>
<div id="mutate" class="section level3 hasAnchor" number="3.5.4">
<h3><span class="header-section-number">3.5.4</span> mutate()<a href="tutorial-data-management-with-tidyverse.html#mutate" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Often you want to add new columns to a data set, e.g. when you calculate new variables or when you want to store re-coded values of other variables. With <code>mutate()</code>, new columns will be added to the end of you data frame.</p>
<p>For example, we can resize the height column to provide the body height in m instead of cm. Let’s call that variable <em>m_height</em>. We’ll assign our transformed data (with the newly created <em>m_height</em> column) back into our source object (<em>starwars_short</em>) to keep the changes for the future (and not just print it to the console).</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="tutorial-data-management-with-tidyverse.html#cb80-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="ot">&lt;-</span> starwars_short <span class="sc">%&gt;%</span>     <span class="co"># assigns your source object, i.e. data, back to itself to save changes</span></span>
<span id="cb80-2"><a href="tutorial-data-management-with-tidyverse.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">m_height=</span>height<span class="sc">/</span><span class="dv">100</span>)            <span class="co"># creates the new variable &quot;m_height&quot; and adds it to the end of the data frame</span></span>
<span id="cb80-3"><a href="tutorial-data-management-with-tidyverse.html#cb80-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-4"><a href="tutorial-data-management-with-tidyverse.html#cb80-4" aria-hidden="true" tabindex="-1"></a>starwars_short                           <span class="co"># print the data to your console to inspect the new column</span></span></code></pre></div>
<pre><code>## # A tibble: 87 x 6
##    name               species birth_year  mass height m_height
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;    &lt;dbl&gt;
##  1 Luke Skywalker     Human         19      77    172     1.72
##  2 C-3PO              Droid        112      75    167     1.67
##  3 R2-D2              Droid         33      32     96     0.96
##  4 Darth Vader        Human         41.9   136    202     2.02
##  5 Leia Organa        Human         19      49    150     1.5 
##  6 Owen Lars          Human         52     120    178     1.78
##  7 Beru Whitesun lars Human         47      75    165     1.65
##  8 R5-D4              Droid         NA      32     97     0.97
##  9 Biggs Darklighter  Human         24      84    183     1.83
## 10 Obi-Wan Kenobi     Human         57      77    182     1.82
## # ... with 77 more rows</code></pre>
<p>Let’s calculate the BMI of the Star Wars characters with the BMI formula and the newly created <em>m_height</em> variable. Save the changes to your data frame by assigning the source object back to itself.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="tutorial-data-management-with-tidyverse.html#cb82-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="ot">&lt;-</span> starwars_short <span class="sc">%&gt;%</span>     <span class="co"># assigns your source object, i.e. data, back to itself to save changes</span></span>
<span id="cb82-2"><a href="tutorial-data-management-with-tidyverse.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">BMI=</span> mass<span class="sc">/</span>m_height<span class="sc">^</span><span class="dv">2</span>)           <span class="co"># creates the new variable &quot;BMI&quot; and adds it to the end of the data frame</span></span>
<span id="cb82-3"><a href="tutorial-data-management-with-tidyverse.html#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="tutorial-data-management-with-tidyverse.html#cb82-4" aria-hidden="true" tabindex="-1"></a>starwars_short                           <span class="co"># print the data to your console to inspect the new column</span></span></code></pre></div>
<pre><code>## # A tibble: 87 x 7
##    name               species birth_year  mass height m_height   BMI
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt;
##  1 Luke Skywalker     Human         19      77    172     1.72  26.0
##  2 C-3PO              Droid        112      75    167     1.67  26.9
##  3 R2-D2              Droid         33      32     96     0.96  34.7
##  4 Darth Vader        Human         41.9   136    202     2.02  33.3
##  5 Leia Organa        Human         19      49    150     1.5   21.8
##  6 Owen Lars          Human         52     120    178     1.78  37.9
##  7 Beru Whitesun lars Human         47      75    165     1.65  27.5
##  8 R5-D4              Droid         NA      32     97     0.97  34.0
##  9 Biggs Darklighter  Human         24      84    183     1.83  25.1
## 10 Obi-Wan Kenobi     Human         57      77    182     1.82  23.2
## # ... with 77 more rows</code></pre>
<p><code>mutate()</code> does not merely work with mathematical operators. You can also categorize numeric variables with the <code>case_when</code> function, which is part of the <code>mutate()</code> function.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="tutorial-data-management-with-tidyverse.html#cb84-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="ot">&lt;-</span> starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="tutorial-data-management-with-tidyverse.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_cat=</span> <span class="fu">case_when</span>(            <span class="co"># &quot;cat&quot; is short for &quot;categorized&quot;</span></span>
<span id="cb84-3"><a href="tutorial-data-management-with-tidyverse.html#cb84-3" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&lt;</span> <span class="dv">20</span> <span class="sc">~</span> <span class="st">&quot;very young&quot;</span>,</span>
<span id="cb84-4"><a href="tutorial-data-management-with-tidyverse.html#cb84-4" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&lt;</span> <span class="dv">40</span> <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb84-5"><a href="tutorial-data-management-with-tidyverse.html#cb84-5" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&lt;</span> <span class="dv">70</span> <span class="sc">~</span> <span class="st">&quot;mid-aged&quot;</span>,</span>
<span id="cb84-6"><a href="tutorial-data-management-with-tidyverse.html#cb84-6" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&lt;=</span> <span class="dv">100</span> <span class="sc">~</span> <span class="st">&quot;old&quot;</span>,</span>
<span id="cb84-7"><a href="tutorial-data-management-with-tidyverse.html#cb84-7" aria-hidden="true" tabindex="-1"></a>    birth_year <span class="sc">&gt;</span> <span class="dv">100</span> <span class="sc">~</span> <span class="st">&quot;very old&quot;</span>)</span>
<span id="cb84-8"><a href="tutorial-data-management-with-tidyverse.html#cb84-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb84-9"><a href="tutorial-data-management-with-tidyverse.html#cb84-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-10"><a href="tutorial-data-management-with-tidyverse.html#cb84-10" aria-hidden="true" tabindex="-1"></a>starwars_short</span></code></pre></div>
<pre><code>## # A tibble: 87 x 8
##    name               species birth_year  mass height m_height   BMI age_cat   
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;     
##  1 Luke Skywalker     Human         19      77    172     1.72  26.0 very young
##  2 C-3PO              Droid        112      75    167     1.67  26.9 very old  
##  3 R2-D2              Droid         33      32     96     0.96  34.7 young     
##  4 Darth Vader        Human         41.9   136    202     2.02  33.3 mid-aged  
##  5 Leia Organa        Human         19      49    150     1.5   21.8 very young
##  6 Owen Lars          Human         52     120    178     1.78  37.9 mid-aged  
##  7 Beru Whitesun lars Human         47      75    165     1.65  27.5 mid-aged  
##  8 R5-D4              Droid         NA      32     97     0.97  34.0 &lt;NA&gt;      
##  9 Biggs Darklighter  Human         24      84    183     1.83  25.1 young     
## 10 Obi-Wan Kenobi     Human         57      77    182     1.82  23.2 mid-aged  
## # ... with 77 more rows</code></pre>
<p>Finally, you can recode variables by using the <code>recode()</code> function, which is part of the <code>mutate()</code> function. Let’s be crazy and recode all droids as robots<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> and save the result in a new variable called <em>crazy_species</em>! Please note that <code>recode()</code> has an unusual syntax because it follows the order of <code>old_var = new_var</code> instead of the usual order: <code>new_var = old_var</code>. Therefore, <code>recode()</code> is likely to be retired in the future (use <code>case_when</code> instead).</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="tutorial-data-management-with-tidyverse.html#cb86-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="ot">&lt;-</span> starwars_short <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="tutorial-data-management-with-tidyverse.html#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">crazy_species=</span><span class="fu">recode</span>( <span class="co"># alternatively, you could also recode directly back into the species variable</span></span>
<span id="cb86-3"><a href="tutorial-data-management-with-tidyverse.html#cb86-3" aria-hidden="true" tabindex="-1"></a>    species, <span class="st">&quot;Droid&quot;</span><span class="ot">=</span><span class="st">&quot;Robot&quot;</span>))</span>
<span id="cb86-4"><a href="tutorial-data-management-with-tidyverse.html#cb86-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-5"><a href="tutorial-data-management-with-tidyverse.html#cb86-5" aria-hidden="true" tabindex="-1"></a>starwars_short</span></code></pre></div>
<pre><code>## # A tibble: 87 x 9
##    name               species birth_year  mass height m_height   BMI age_cat    crazy_species
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;        
##  1 Luke Skywalker     Human         19      77    172     1.72  26.0 very young Human        
##  2 C-3PO              Droid        112      75    167     1.67  26.9 very old   Robot        
##  3 R2-D2              Droid         33      32     96     0.96  34.7 young      Robot        
##  4 Darth Vader        Human         41.9   136    202     2.02  33.3 mid-aged   Human        
##  5 Leia Organa        Human         19      49    150     1.5   21.8 very young Human        
##  6 Owen Lars          Human         52     120    178     1.78  37.9 mid-aged   Human        
##  7 Beru Whitesun lars Human         47      75    165     1.65  27.5 mid-aged   Human        
##  8 R5-D4              Droid         NA      32     97     0.97  34.0 &lt;NA&gt;       Robot        
##  9 Biggs Darklighter  Human         24      84    183     1.83  25.1 young      Human        
## 10 Obi-Wan Kenobi     Human         57      77    182     1.82  23.2 mid-aged   Human        
## # ... with 77 more rows</code></pre>
<p><strong>Tip for advanced users 1:</strong> There is a special case of recoding: Sometimes you will receive data (e.g. through an import from SPSS) in which missings are not marked as NA, but with -9 (or any other number). Unfortunately, you will have to tell R that these are missing values and should be set to NA. In this case, use the <code>na_if()</code> function, which is also part of the <code>mutate()</code> function.</p>
<p>Luke Skywalker, the first observation in our data frame, is 172cm tall. For the sake of practice, let’s set all heights that are equal to 172cm to NA. This time, we won’t save this transformation for later use (by reassigning the source object back to itself) since this transformation does not make a lot of sense.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="tutorial-data-management-with-tidyverse.html#cb88-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb88-2"><a href="tutorial-data-management-with-tidyverse.html#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">height=</span> <span class="fu">na_if</span>(height, <span class="dv">172</span>))</span></code></pre></div>
<pre><code>## # A tibble: 87 x 9
##    name               species birth_year  mass height m_height   BMI age_cat    crazy_species
##    &lt;chr&gt;              &lt;chr&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;        
##  1 Luke Skywalker     Human         19      77     NA     1.72  26.0 very young Human        
##  2 C-3PO              Droid        112      75    167     1.67  26.9 very old   Robot        
##  3 R2-D2              Droid         33      32     96     0.96  34.7 young      Robot        
##  4 Darth Vader        Human         41.9   136    202     2.02  33.3 mid-aged   Human        
##  5 Leia Organa        Human         19      49    150     1.5   21.8 very young Human        
##  6 Owen Lars          Human         52     120    178     1.78  37.9 mid-aged   Human        
##  7 Beru Whitesun lars Human         47      75    165     1.65  27.5 mid-aged   Human        
##  8 R5-D4              Droid         NA      32     97     0.97  34.0 &lt;NA&gt;       Robot        
##  9 Biggs Darklighter  Human         24      84    183     1.83  25.1 young      Human        
## 10 Obi-Wan Kenobi     Human         57      77    182     1.82  23.2 mid-aged   Human        
## # ... with 77 more rows</code></pre>
</div>
<div id="simmarize-group_by" class="section level3 hasAnchor" number="3.5.5">
<h3><span class="header-section-number">3.5.5</span> simmarize() [+ group_by()]<a href="tutorial-data-management-with-tidyverse.html#simmarize-group_by" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Instead of using <code>summarize()</code>, you could omit the American English and write <code>summarise()</code>. This function collapses a data frame into a single row that shows you summary statistics about your variables. Be careful not to overwrite your source object with the collapsed data frame, i.e. do not reassign the source object to itself when you use <code>summarize()</code> (at least unless you have a good reason to do so).</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="tutorial-data-management-with-tidyverse.html#cb90-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb90-2"><a href="tutorial-data-management-with-tidyverse.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_height =</span> <span class="fu">mean</span>(height, <span class="at">na.rm=</span><span class="cn">TRUE</span>))  <span class="co"># collapses the data frame into one variable called &quot;mean_height&quot;</span></span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   mean_height
##         &lt;dbl&gt;
## 1        174.</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="tutorial-data-management-with-tidyverse.html#cb92-1" aria-hidden="true" tabindex="-1"></a>                                                     <span class="co"># na.rm = TRUE -&gt; removes the missing values prior to the computation of the summary</span></span></code></pre></div>
<p>We now know that the average Star Wars character is 174cm tall. But the <code>summarize()</code>function grows especially powerful when it is combined with `<code>group_by</code> to display summary statistics for groups.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="tutorial-data-management-with-tidyverse.html#cb93-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="tutorial-data-management-with-tidyverse.html#cb93-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span>                              <span class="co"># every unique species becomes its own group</span></span>
<span id="cb93-3"><a href="tutorial-data-management-with-tidyverse.html#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_height =</span> <span class="fu">mean</span>(height, <span class="at">na.rm=</span><span class="cn">TRUE</span>),  <span class="co"># collapses the data frame into one row with one variable called &quot;mean_height&quot;...</span></span>
<span id="cb93-4"><a href="tutorial-data-management-with-tidyverse.html#cb93-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">count =</span> <span class="fu">n</span>()                         <span class="co"># and a second variable that shows the group size (i.e. count)</span></span>
<span id="cb93-5"><a href="tutorial-data-management-with-tidyverse.html#cb93-5" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
<pre><code>## # A tibble: 38 x 3
##    species   mean_height count
##    &lt;chr&gt;           &lt;dbl&gt; &lt;int&gt;
##  1 Aleena            79      1
##  2 Besalisk         198      1
##  3 Cerean           198      1
##  4 Chagrian         196      1
##  5 Clawdite         168      1
##  6 Droid            131.     6
##  7 Dug              112      1
##  8 Ewok              88      1
##  9 Geonosian        183      1
## 10 Gungan           209.     3
## # ... with 28 more rows</code></pre>
<p>We learn from the 6 droids in our data set that droids are small, 131cm on average. But Ewoks are even smaller (88cm on average). <em>Pro tip:</em> you can even group by two groups at the same time with the method <code>group_by(x1, x2, .add=TRUE)</code>.</p>
<p>Finally, we can also retrieve all relevant summary statistics of a classic <a href="https://www.simplypsychology.org/boxplots.html">box plot</a>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="tutorial-data-management-with-tidyverse.html#cb95-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="tutorial-data-management-with-tidyverse.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span>                                <span class="co"># every unique species becomes its own group</span></span>
<span id="cb95-3"><a href="tutorial-data-management-with-tidyverse.html#cb95-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">MAX =</span> <span class="fu">max</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb95-4"><a href="tutorial-data-management-with-tidyverse.html#cb95-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">UQ=</span> <span class="fu">quantile</span>(height, <span class="fl">0.75</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb95-5"><a href="tutorial-data-management-with-tidyverse.html#cb95-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">M =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb95-6"><a href="tutorial-data-management-with-tidyverse.html#cb95-6" aria-hidden="true" tabindex="-1"></a>          <span class="co"># SD = sd(height, na.rm = TRUE),             # calculating the standard deviation is useless because we often have only 1 observation per species</span></span>
<span id="cb95-7"><a href="tutorial-data-management-with-tidyverse.html#cb95-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">LQ=</span> <span class="fu">quantile</span>(height, <span class="fl">0.25</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb95-8"><a href="tutorial-data-management-with-tidyverse.html#cb95-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">MIN =</span> <span class="fu">min</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb95-9"><a href="tutorial-data-management-with-tidyverse.html#cb95-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">count =</span> <span class="fu">n</span>()                                    <span class="co"># shows the group_size (i.e. count)</span></span>
<span id="cb95-10"><a href="tutorial-data-management-with-tidyverse.html#cb95-10" aria-hidden="true" tabindex="-1"></a>            )</span></code></pre></div>
<pre><code>## # A tibble: 38 x 7
##    species     MAX    UQ     M    LQ   MIN count
##    &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt;
##  1 Aleena       79    79   79     79    79     1
##  2 Besalisk    198   198  198    198   198     1
##  3 Cerean      198   198  198    198   198     1
##  4 Chagrian    196   196  196    196   196     1
##  5 Clawdite    168   168  168    168   168     1
##  6 Droid       200   167  131.    96    96     6
##  7 Dug         112   112  112    112   112     1
##  8 Ewok         88    88   88     88    88     1
##  9 Geonosian   183   183  183    183   183     1
## 10 Gungan      224   215  209.   201   196     3
## # ... with 28 more rows</code></pre>
<p><strong>Tip for advances users 2:</strong> If you want to count the unique values of variables, then <code>data %&gt;% group_by(a, b) %&gt;% summarize(n = n())</code> might not be the best solution (it’s a lot of code, isn’t it?).</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="tutorial-data-management-with-tidyverse.html#cb97-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb97-2"><a href="tutorial-data-management-with-tidyverse.html#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, age_cat) <span class="sc">%&gt;%</span></span>
<span id="cb97-3"><a href="tutorial-data-management-with-tidyverse.html#cb97-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">count =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 51 x 3
## # Groups:   species [38]
##    species  age_cat    count
##    &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt;
##  1 Aleena   &lt;NA&gt;           1
##  2 Besalisk &lt;NA&gt;           1
##  3 Cerean   old            1
##  4 Chagrian &lt;NA&gt;           1
##  5 Clawdite &lt;NA&gt;           1
##  6 Droid    very old       1
##  7 Droid    very young     1
##  8 Droid    young          1
##  9 Droid    &lt;NA&gt;           3
## 10 Dug      &lt;NA&gt;           1
## # ... with 41 more rows</code></pre>
<p>For more efficient code, you can use the <code>count()</code> function instead: <code>data %&gt;% count(a, b)</code>.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="tutorial-data-management-with-tidyverse.html#cb99-1" aria-hidden="true" tabindex="-1"></a>starwars_short <span class="sc">%&gt;%</span></span>
<span id="cb99-2"><a href="tutorial-data-management-with-tidyverse.html#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(species, age_cat)</span></code></pre></div>
<pre><code>## # A tibble: 51 x 3
##    species  age_cat        n
##    &lt;chr&gt;    &lt;chr&gt;      &lt;int&gt;
##  1 Aleena   &lt;NA&gt;           1
##  2 Besalisk &lt;NA&gt;           1
##  3 Cerean   old            1
##  4 Chagrian &lt;NA&gt;           1
##  5 Clawdite &lt;NA&gt;           1
##  6 Droid    very old       1
##  7 Droid    very young     1
##  8 Droid    young          1
##  9 Droid    &lt;NA&gt;           3
## 10 Dug      &lt;NA&gt;           1
## # ... with 41 more rows</code></pre>
</div>
<div id="chaining-functions-in-a-pipe" class="section level3 hasAnchor" number="3.5.6">
<h3><span class="header-section-number">3.5.6</span> Chaining functions in a pipe<a href="tutorial-data-management-with-tidyverse.html#chaining-functions-in-a-pipe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All of the <code>dplyr</code> functions can be chained in one single pipe. Using the original starwars_data, we’ll only analyze Star Wars characters who are older than 25 years (<code>filter()</code>), calculate the BMI (<code>mutate()</code>), group them by their species (<code>group_by()</code>) and summarize the average BMI (<code>summarize()</code>). We’ll display the final result in an ascending order (<code>arrange()</code>).</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="tutorial-data-management-with-tidyverse.html#cb101-1" aria-hidden="true" tabindex="-1"></a>starwars_data <span class="sc">%&gt;%</span></span>
<span id="cb101-2"><a href="tutorial-data-management-with-tidyverse.html#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">BMI =</span> mass<span class="sc">/</span>(height<span class="sc">/</span><span class="dv">100</span>)<span class="sc">^</span><span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb101-3"><a href="tutorial-data-management-with-tidyverse.html#cb101-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(birth_year<span class="sc">&gt;</span><span class="dv">25</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb101-4"><a href="tutorial-data-management-with-tidyverse.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span>                     </span>
<span id="cb101-5"><a href="tutorial-data-management-with-tidyverse.html#cb101-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_BMI =</span> <span class="fu">mean</span>(BMI, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb101-6"><a href="tutorial-data-management-with-tidyverse.html#cb101-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean_BMI)</span></code></pre></div>
<pre><code>## # A tibble: 14 x 2
##    species        mean_BMI
##    &lt;chr&gt;             &lt;dbl&gt;
##  1 Gungan             17.2
##  2 Twi&#39;lek            17.4
##  3 Mirialan           18.8
##  4 Cerean             20.9
##  5 Wookiee            21.5
##  6 Rodian             24.7
##  7 Human              25.3
##  8 Mon Calamari       25.6
##  9 Zabrak             26.1
## 10 Droid              30.8
## 11 Trandoshan         31.3
## 12 Yoda&#39;s species     39.0
## 13 Hutt              443. 
## 14 &lt;NA&gt;              NaN</code></pre>
</div>
</div>
<div id="take-aways-2" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Take-Aways<a href="tutorial-data-management-with-tidyverse.html#take-aways-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><strong>Tidy data</strong>: is a tabular in which each column represents one single variable, each row represents a single observation and each cell contains only one single value</li>
<li><strong>Pipe operator</strong>: <em>%&gt;%</em> is used to chain functions and apply them to a source object. We call these chains of functions <em>pipes</em></li>
<li><strong>dplyr functions</strong>: there are five main dplyr functions that you should know of: <code>select</code>, <code>filter</code>, <code>arrange</code>, <code>mutate</code>, and <code>summarize</code> [+ <code>group_by</code>].</li>
</ul>
</div>
<div id="additional-tutorials-2" class="section level2 hasAnchor" number="3.7">
<h2><span class="header-section-number">3.7</span> Additional tutorials<a href="tutorial-data-management-with-tidyverse.html#additional-tutorials-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You still have questions? The following tutorials &amp; papers can help you with that:</p>
<ul>
<li><a href="https://r4ds.had.co.nz/tidy-data.html#introduction-6">R for Data Science, Chapter 12</a></li>
<li><a href="https://r4ds.had.co.nz/transform.html?q=filter#dplyr-basics">R for Data Science, Chapter 5.1.3 and the following</a></li>
<li><a href="https://style.tidyverse.org/">The tidyverse style guide</a></li>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">Data wrangling with dplyr &amp; tidyr Cheat Sheet</a></li>
</ul>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>To be precise, the pipe operator was introduced to R with the package magrittr, not with <code>dplyr</code>. Nowadays, the <em>%&gt;%</em> operator can be used outside the tidyverse package if magrittr is installed and loaded: library(magrittr).<a href="tutorial-data-management-with-tidyverse.html#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>Please, don’t hate me for this.<a href="tutorial-data-management-with-tidyverse.html#fnref2" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tutorial-first-steps-in-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tutorial-data-visualization-with-ggplot.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/LKobilke/ICA_Hackathon22/edit/main/index.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Tidy Text Analysis.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
